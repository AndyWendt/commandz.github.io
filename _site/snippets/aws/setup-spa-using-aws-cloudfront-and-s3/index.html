<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hosting an SPA Using AWS - Commandz.io</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <header>
        <nav>
            <a href="/" class="nav-logo">
                <img src="/images/cmdz.jpg" alt="Commandz.io Logo" />
            </a>
            <a href="/about">About</a>
            <a href="/posts">Blog</a>
            <a href="/learning">Learning</a>
            <a href="/snippets">Snippets</a>
        </nav>
    </header>

    <main>
        
<article class="content">
    <header class="content-header">
        <h1>
            Hosting an SPA Using AWS
            
        </h1>
        
        <div class="metadata">
            
            <time datetime="2017-01-30T00:09:09.000Z">30 Jan 2017</time>
            

            

            

            
            <span class="separator">â€¢</span>
            <span class="tags">
                
                <span class="tag">api</span>
                
                <span class="tag">spa</span>
                
                <span class="tag">cloudfront</span>
                
                <span class="tag">devops</span>
                
                <span class="tag">s3</span>
                
                <span class="tag">dns</span>
                
                <span class="tag">snippet</span>
                
            </span>
            
        </div>
    </header>

    <div class="content-body">
        <ul>
<li>
<p><a href="http://docs.aws.amazon.com/gettingstarted/latest/swh/website-hosting-intro.html">Good to read first on static webhosting</a></p>
</li>
<li>
<p>Create the bucket</p>
<ul>
<li>Note that you must replace <a href="http://example.com">example.com</a> with the name of your domain.</li>
<li>Your bucket must be named the same as your site name.</li>
</ul>
</li>
<li>
<p>Create <a href="http://logs.domain.com">logs.domain.com</a> and <a href="http://www.example.com">www.example.com</a> if you want those</p>
</li>
<li>
<p>In the buckets pane:</p>
<ul>
<li>click Properties -&gt; Permissions -&gt; Add Bucket Policy and paste in (changing <a href="http://example.com">example.com</a> to your bucket name):</li>
</ul>
</li>
</ul>
<pre><code>{
  &quot;Version&quot;:&quot;2012-10-17&quot;,
  &quot;Statement&quot;: [{
    &quot;Sid&quot;: &quot;Allow Public Access to All Objects&quot;,
    &quot;Effect&quot;: &quot;Allow&quot;,
    &quot;Principal&quot;: &quot;*&quot;,
    &quot;Action&quot;: &quot;s3:GetObject&quot;,
    &quot;Resource&quot;: &quot;arn:aws:s3:::example.com/*&quot;
  }
 ]
}
</code></pre>
<ul>
<li>
<p><a href="http://docs.aws.amazon.com/gettingstarted/latest/swh/getting-started-create-cfdist.html">AWS document on how to setup a static website using a custom domain on Cloudfront</a></p>
</li>
<li>
<p>Set up CNAME records pointing to the address of the new S3 Bucket.</p>
<ul>
<li>Change the cname to point to the cloudfront distribution if you want to do so.</li>
</ul>
</li>
</ul>
<h3>Misc</h3>
<h4>Security:</h4>
<ul>
<li><a href="https://aws.amazon.com/blogs/security/writing-iam-policies-how-to-grant-access-to-an-amazon-s3-bucket/">Restrict access to only one s3 bucket</a></li>
<li><a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/permissions.html">Restrict access to only api gateway</a></li>
</ul>
<p>You need to invalidate cloudfront in order for the updates to s3 to be pushed.</p>
<h4>Proper routing</h4>
<ul>
<li>
<p><a href="https://keita.blog/2015/11/24/hosting-a-single-page-app-on-s3-with-proper-urls/">SPA Routing</a></p>
</li>
<li>
<p><a href="https://medium.com/wolox-driving-innovation/deploy-your-angularjs-app-to-aws-s3-with-ssl-3635a62533ab#.eidbk2w2z">AngularJS SPA routing</a></p>
</li>
</ul>
<h4>Contact form</h4>
<ul>
<li><a href="https://codehabitude.com/2016/04/05/forms-to-emails-using-aws-lambda-api-gateway/">AWS Lambda &amp; API Gateway Contact Form</a></li>
</ul>

    </div>
</article>

<style>
    .content-header {
        margin-bottom: 2rem;
    }

    .metadata {
        color: #666;
        font-size: 0.9rem;
        margin-top: 0.5rem;
    }

    .separator {
        margin: 0 0.5rem;
    }

    .unpublished-badge {
        background-color: #ffd700;
        color: #000;
        font-size: 0.8rem;
        padding: 0.2rem 0.5rem;
        border-radius: 3px;
        font-weight: 500;
        margin-left: 0.5rem;
    }

    .tag {
        background-color: #e9ecef;
        color: #495057;
        font-size: 0.8rem;
        padding: 0.2rem 0.5rem;
        border-radius: 3px;
        margin-right: 0.3rem;
    }

    .tag:last-child {
        margin-right: 0;
    }
</style> 
    </main>

    <footer class="site-footer">
        <p>&copy; 2017 Commandz.io. All rights reserved.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html> 