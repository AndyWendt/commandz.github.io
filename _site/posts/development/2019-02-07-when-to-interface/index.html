<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>When to Interface - Commandz.io</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <header>
        <nav>
            <a href="/" class="nav-logo">
                <img src="/images/cmdz.jpg" alt="Commandz.io Logo" />
            </a>
            <a href="/about">About</a>
            <a href="/posts">Blog</a>
            <a href="/learning">Learning</a>
            <a href="/snippets">Snippets</a>
        </nav>
    </header>

    <main>
        
<article class="content">
    <header class="content-header">
        <h1>
            When to Interface
            
        </h1>
        
        <div class="metadata">
            
            <time datetime="2019-02-07T00:09:09.000Z">07 Feb 2019</time>
            

            

            

            
            <span class="separator">â€¢</span>
            <span class="tags">
                
                <span class="tag">object oriented</span>
                
                <span class="tag">oo</span>
                
                <span class="tag">abstraction</span>
                
                <span class="tag">design patterns</span>
                
                <span class="tag">architecture</span>
                
            </span>
            
        </div>
    </header>

    <div class="content-body">
        <p>While reading through Martin Fowler's <em>Patterns of Enterprise Application Architecture</em>, I came across this sage advise regarding when and why to use interfaces while reading about the <a href="/books/development/enterprise-application-architecture/#separated-interface-476">Separated Interface</a> pattern.</p>
<blockquote>
<p>I come across many developers who have separate interfaces for every class they write.  I think this is excessive, especially for application development.  Keeping separate interfaces and implementations is extra work, especially since you often need factory classes (with interfaces and implementations) as well.</p>
<p>For applications I recommend using  a separate interface only if you want to break a dependency or you want to have multiple independent implementations.  If you put the interface and implementation together and need to separate them later, this is a simple refactoring that can be delayed until you need to do it.</p>
</blockquote>
<p>I know that I have been guilty of using too much abstraction and I have felt the pain of doing so.  When you use too many interfaces, you substantially increase the overhead and boilerplate necessary to implement any given feature.  A more pragmatic approach is to rely upon the implicit interface that is attendant with every class. The truth is that it is easy to refactor an interface away from an implementation using modern IDEs.</p>
<p>Robert C. Martin says that it is best to <a href="https://commandz.io/books/development/clean-architecture/#chapter-17-boundaries">delay making some architectural decisions</a> for as long as is reasonably possible.  Delaying the decision to add interfaces for some implementations is one of those decisions.</p>
<p>Fowler provides these guidelines on when to use a separated interface:</p>
<ul>
<li>Abstract framework code that needs to call application code</li>
<li>Code in one layer that needs to call code in another layer that it shouldn't see</li>
<li>When you need to call code developed by another group but don't want a dependency on it</li>
</ul>
<p>This research led me to do a bit more searching and inquire a bit further as to &quot;when to interface.&quot;  Matthias Noback wrote an <a href="https://matthiasnoback.nl/2018/08/when-to-add-an-interface-to-a-class/">excellent article</a> on the pragmatic usage of interfaces.</p>
<p>His guidance on <em>when to interface</em> is:</p>
<ul>
<li>If you foresee that the user wants to replace part of the object hierarchy</li>
<li>If you want to introduce an abstraction for multiple specific things</li>
<li>If the class depends on third-party code</li>
<li>If the class uses I/O (including network calls)</li>
<li>If not all public methods are meant to be used by regular clients (i.e. the <a href="https://en.wikipedia.org/wiki/Interface_segregation_principle">Interface Segregation Principle</a>)</li>
</ul>
<p>However, there are several types of classes where it doesn't make sense to add interfaces to them.  They mainly have to do with your application.  Adding interfaces to these classes often makes little sense because of the increased overhead.  Mathias provided additional guidance here:</p>
<blockquote>
<p>What these types of classes have in common is that it's not at all needed nor desirable to swap their implementations out. More specifically, some good examples of these classes are:</p>
<ul>
<li>Entities</li>
<li>Value objects</li>
<li>Domain services</li>
<li>Application services</li>
</ul>
<p>The reason is that these are classes from the domain or application layer.</p>
</blockquote>

    </div>
</article>

<style>
    .content-header {
        margin-bottom: 2rem;
    }

    .metadata {
        color: #666;
        font-size: 0.9rem;
        margin-top: 0.5rem;
    }

    .separator {
        margin: 0 0.5rem;
    }

    .unpublished-badge {
        background-color: #ffd700;
        color: #000;
        font-size: 0.8rem;
        padding: 0.2rem 0.5rem;
        border-radius: 3px;
        font-weight: 500;
        margin-left: 0.5rem;
    }

    .tag {
        background-color: #e9ecef;
        color: #495057;
        font-size: 0.8rem;
        padding: 0.2rem 0.5rem;
        border-radius: 3px;
        margin-right: 0.3rem;
    }

    .tag:last-child {
        margin-right: 0;
    }
</style> 
    </main>

    <footer class="site-footer">
        <p>&copy; 2019 Commandz.io. All rights reserved.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html> 